# 谁是卧底 - 新加坡版

> 中文 | [English](./README.md)

一个适合新加坡家庭三代同堂的聚会游戏，支持中英文双语显示。

## 游戏特点

- **适合三代同堂**：爷爷奶奶、父母、小朋友都能参与
- **新加坡本土词汇**：咖椰吐司、肉骨茶、巴刹、组屋等
- **手机传递玩法**：一人看词后传给下一个人，适合聚会场景
- **中英文双语显示**：词汇同时显示中英文
- **PWA支持**：可以安装到手机桌面，离线也能玩
- **自动竖屏锁定**：确保手机传递时显示正常

## 技术栈

- **后端**：Bun + TypeScript
- **前端**：原生 HTML + jQuery
- **数据库**：IndexedDB（浏览器本地存储）
- **测试**：Bun Test + Playwright

## 快速开始

### 安装依赖

```bash
bun install
```

### 运行开发服务器

```bash
bun run dev
```

### 运行测试

```bash
# 单元测试
bun test

# E2E测试
bun run test-all.js
```

### 生产部署

```bash
bun run server.ts
```

服务器默认运行在 http://localhost:3456

## 游戏玩法

1. **设置游戏**：选择玩家数量（4-12人）和卧底数量
2. **看词阶段**：所有玩家轮流看自己的词（只看一次）
3. **讨论投票**：描述词语，找出卧底，投票淘汰可疑玩家
4. **揭晓结果**：淘汰后只显示谁被淘汰，不暴露身份
5. **循环进行**：直到分出胜负，最后揭晓所有人的身份和词语

## 词库分类

- 本地食物：海南鸡饭、肉骨茶、咖椰吐司等
- 热带水果：榴莲、红毛丹、山竹等
- 日常用语：巴刹、组屋、德士、冷气等
- 家庭称谓：公公、婆婆、舅舅、阿姨等
- 节日庆祝：红包、灯笼、月饼、粽子等

## 开发

```
whoisspy/
├── public/
│   ├── index.html      # 主页面
│   ├── style.css       # 样式
│   ├── game.js         # 游戏逻辑
│   ├── words.js        # 词汇库
│   ├── db.js           # IndexedDB封装
│   ├── manifest.json   # PWA配置
│   ├── sw.js           # Service Worker
│   └── icons/          # 图标
├── test/
│   └── game-logic.test.js  # 单元测试
├── server.ts           # Bun服务器
└── package.json
```

## License

MIT
